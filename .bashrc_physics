tmuxPanes() { 
  tmux new-session -d -s temp_name
  tmux split-window -v
  tmux split-window -h
  tmux select-pane -U
  tmux split-window -h
  tmux resize-pane -D 10
  tmux select-pane -L
  tmux select-pane -D
}

tmuxSplit() { tmux split-window -v \; split-window -h \; select-pane -U \; split-window -h \; resize-pane -D 10 \; select-pane -L\; send-keys "echo 'Did it!'" C-m ; }

mySetup() {
  project=$1
  if [[ $project == "bbll" ]]; 
  then
    echo "In bbll";
    folder="/home/nluongo/bbll"
  elif [[ $project == "MasterShef" ]];
  then
    echo "In MasterShef";
    folder="/home/nluongo/MS"
  elif [[ $project == "AnaSkim" ]];
  then
    echo "In AnaSkim";
    folder="/home/nluongo/AS"
  elif [[ $project == "PAU" ]];
  then
    echo "In PyAnalysisUtils";
    folder="/home/nluongo/PAU"
  elif [[ $project == "DoubleHiggs" ]];
  then
    echo "In DoubleHiggs";
    folder="/home/nluongo/DoubleHiggs"
  elif [[ $project == "FTAGDumper" ]];
  then
    echo "In training-dataset-dumper";
    folder="/home/nluongo/FTAG/dumper"
  elif [[ $project == "FTAGupp" ]];
  then
    echo "In umami-preprocessing";
    folder="/home/nluongo/FTAG/upp"
  elif [[ $project == "salt" ]];
  then
    echo "In salt";
    folder="/home/nluongo/FTAG/salt"
  elif [ -d $project ];
  then
    echo "In $project";
    folder=$project
  else
    echo "$project is not a valid project or directory";
    return 0
  fi

  echo $folder
  cd $folder
  tmuxPanes
  tmux send "cd build" ENTER
  tmux send "asetup --restore" ENTER
  tmux send "source x*/setup.sh" ENTER
  tmux attach
  while [ $(tmux display-message -p '#S') == "temp_name" ]
  do
    echo "In while"
    tmux rename-session -t temp_name "${project}"
  done
}
complete -W 'bbll MasterShef AnaSkim PAU DoubleHiggs FTAGDumper FTAGupp salt' mySetup
complete -F _cd mySetup

scptolxplus() {
  if [ $# > 1 ]
  then
    FILE_NAME_DEST=$2
  else
    FILE_NAME_DEST=''
  fi
  scp $1 nicholas@lxplus.cern.ch:/eos/user/n/nicholas/$FILE_NAME_DEST
}

lcrc() {
  cd /lcrc/group/ATLAS/users
}

ath() {
  cd ~/athena
  asetup master,latest,Athena
  cd -
}


builder() {
  asetup --restore
  source x*/setup.sh
}

export RUCIO_ACCOUNT=nicholas

alias voms="voms-proxy-init -voms atlas"

tex() {
  source /soft/hep/hep_texlive.sh
}

minitree_events() {
  root $1 -q -e "AnalysisMiniTree->GetEntries()"
}

minitree_branches() {
  root $1 -q -e "AnalysisMiniTree->Print()"
}

# CometML variables for salt training
. ~/.comet_info

export ATLAS_STORAGE=/lcrc/group/ATLAS/users/

export ATLAS_LOCAL_ROOT_BASE=/cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase
#alias setupATLAS='source ${ATLAS_LOCAL_ROOT_BASE}/user/atlasLocalSetup.sh -c el9 -b -q -m lcrc'
alias setupATLAS='source ${ATLAS_LOCAL_ROOT_BASE}/user/atlasLocalSetup.sh'

setupATLAS
lsetup git

echo 'Use "mySetup _" to get started';
echo 'Current options: DoubleHiggs, bbll, MasterShef, AnaSkim, PAU, FTAGDumper, FTAGupp, salt';

if tmux has-session 2>/dev/null; then
  echo "Existing tmux sessions"
fi
